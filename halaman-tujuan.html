<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice Recorder</title>
    <style type="text/css">
				.container {
			display: flex;
			justify-content: center;
			align-items: center;
			flex-direction: column;
			margin-top: 50px;
		}

		.box {
			position: relative;
			margin-top: 30px;
			margin-bottom: 30px;
			transform-style: preserve-3d;
			transform: rotateY(30deg) rotateX(-30deg);
			animation: rotate 10s infinite linear;
		}

		.front, .back, .left, .right, .top, .bottom {
			position: absolute;
			width: 200px;
			height: 200px;
			background-color: white;
			border: 1px solid black;
			box-sizing: border-box;
			opacity: 0.9;
		}

		.front {
			transform: translateZ(100px);
		}

		.back {
			transform: rotateY(180deg) translateZ(100px);
		}

		.left {
			transform: rotateY(-90deg) translateZ(100px);
		}

		.right {
			transform: rotateY(90deg) translateZ(100px);
		}

		.top {
			transform: rotateX(-90deg) translateZ(100px);
		}

		.bottom {
			transform: rotateX(90deg) translateZ(100px);
		}

		.length, .width, .height {
			width: 100%;
			margin-bottom: 10px;
		}

		.length::before, .width::before, .height::before {
			content: attr(data-label);
			display: inline-block;
			width: 60px;
			margin-right: 10px;
			text-align: right;
		}

		.length, .width, .height, .calculate {
			font-size: 18px;
			padding: 5px;
			border-radius: 5px;
			border: 1px solid black;
		}

		.calculate {
			background-color: #4CAF50;
			color: white;
			cursor: pointer;
			margin-top: 10px;
		}

		@keyframes rotate {
			from {
				transform: rotateY(30deg) rotateX(-30deg);
			}
			to {
				transform: rotateY(-330deg) rotateX(-30deg);
			}
		}
	</style>
</head>
<body>
    <button id="startButton">Start Recording</button>
  <button id="stopButton" disabled>Stop Recording</button>
  <canvas id="canvas4"></canvas>
  <div id="result"></div>

  

    <script>
 // Mendaftarkan elemen HTML
var startButton = document.getElementById("startButton");
var stopButton = document.getElementById("stopButton");
var canvas = document.getElementById("canvas4");
var canvasCtx = canvas.getContext("2d");
const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
      const recognition = new window.webkitSpeechRecognition();
      const outputText = document.getElementById('output-text7');

      const interimText = document.getElementById('interim-text');
      const startBtn = document.getElementById('start-btn');
      const stopBtn = document.getElementById('stop-btn');


      const punctuation = {
        "titik ": ".",
        "pemisah": ":",
        "koma": ",",
        "tiga titik": "...",
        "tanda tanya": "?",
        "tanda seru": "!",
        "petik satu": "'",
        "petik dua": "\"",
        "kurung buka": "(",
        "kurung tutup": ")",
        "kurung kurawal buka": "{",
        "kurung kurawal tutup": "}",
        "sama dengan": "=",
        "tanda tambah": "+",
        "tanda kurangi": "-",
        "tanda kali": "×",
        "tanda bagi": "÷",
        "persen": "%",
        "panah kanan": ">",
        "panah kiri": "<",
        "poin": "\n• ",
        "point": "\n• ",
        "baris baru": " ",
        "spasi bawah": "\n",
        "hehehe": "🤭🤭",
        "subhan": "MUHAMMAD SUBHAN AL-GOTSANI",
        "r": "MUHAMMAD Ⓡⓘⓨⓐⓓ FIRDAUS",
        "Z": "MUHAMMAD FAZRI SIDIK ",
        "sarah": "SARAH YULIANA NAFISHA ",
        "mantap": "👍👍👍",
        "emot batu": "🗿🗿🗿",

      };

      function capitalize(str) {
        let words = str.split(" ");
        words = words.map((word) => {
          if (word in punctuation) {
            return punctuation[word];
          } else {
            return word.charAt(0).toUpperCase() + word.slice(1);
          }
        });
        return words.join(" ");
      }
      let isRecording = true;
      recognition.lang = 'id-ID';
      recognition.lang = ['id-ID', 'su-ID'];
      recognition.continuous = true;
      recognition.maxAlternatives = 5;
      recognition.interimResults = isMobile ? false : true;

      recognition.onend = () => {
        if (isRecording) {
          console.log('Recognition ended, restarting');
          recognition.start({
            remember: true
          });

        }
      };

      recognition.onerror = (event) => {
        console.error('Recognition error', event);
      };

      setTimeout(() => {
        stopRecognition();
      }, 300000); // rekam selama 5 menit (300 detik)

      function showInterimTranscripts() {
        if (interimTranscripts.length > 0 && !isTyping) {
          interimText.style.display = 'block';
          interimText.innerHTML = interimTranscripts.join('');
        } else {
          interimText.style.display = 'none';
          interimText.innerHTML = '';
        }
      }


      function toggleRecognition() {
        const popupBox = document.querySelector('.popup-box');

        if (isRecording) {
          recognition.stop();
          startBtn.classList.remove('recording');
          startBtn.style.display = 'inline-block';
          stopBtn.style.display = 'none';

          interimText.innerHTML = '';
          popupBox.classList.remove('show');
        } else {
          recognition.start();
          startBtn.classList.add('recording');
          stopBtn.style.display = 'inline-block';
          popupBox.classList.add('show');
        }

        isRecording = !isRecording;
      }

      const shareContent = (url) => {
        window.location.href = url + encodeURIComponent(outputText.value);
      }

    
      const searchOnYouTube = () => {
        const query = outputText.value;
        const url = `https://www.youtube.com/results?search_query=${encodeURIComponent(query)}`;
        window.open(url, '_blank');
        audio.play();
      }
      const audio = new Audio('assets/notif4.mp3');
let googleWindow;

const searchOnGoogle = () => {
  const query = outputText.value;
  const url = `https://www.google.com/search?q=${encodeURIComponent(query)}`;

  if (googleWindow && !googleWindow.closed) { // cek apakah window sudah dibuka sebelumnya
    googleWindow.location.href = url; // buka URL di window yang sudah dibuka
  } else {
    googleWindow = window.open(url, 'googleWindow'); // buka window baru dengan nama 'googleWindow'
  }

  audio.play(); // tambahkan kode ini untuk memainkan file audio
}
const audio7 = new Audio('assets/notif1.mp3');
      const goToFooter = () => {
        // Pindah ke bagian footer
        const footerSection = document.getElementById("footerSection");
        window.scrollTo(0, footerSection.offsetTop);

        audio7.play();
      }

      const color1Button = () => {
        const color1Button = document.getElementById("color1Button");
        color1Button.click();
        audio.play();
      }
      const audio5 = new Audio('assets/notif1.mp3');
      const goToProduk = () => {
        // Pindah ke bagian footer
        const Produk = document.getElementById("Produk");
        window.scrollTo(0, Produk.offsetTop);
        audio5.play();
      }
      const audio6 = new Audio('assets/notif1.mp3');
      const goToTatang = () => {
        // Pindah ke bagian footer
        const Tatang = document.getElementById("Tatang");
        window.scrollTo(0, Tatang.offsetTop);
        audio6.play();
      }


      const shareToWhatsApp = () => {
        window.location.href = "https://wa.me/?text=" + encodeURIComponent(outputText.value);
        audio.play();
      }

      let currentDirection = null; // variabel global untuk menyimpan arah scroll saat ini
let scrollInterval = null; // variabel global untuk menyimpan interval scroll saat ini

function startAutoScroll(direction) {
  if (currentDirection !== direction) {
    // Jika arah scroll saat ini berbeda dengan arah yang baru, hentikan scroll terlebih dahulu
    stopAutoScroll();
    currentDirection = direction;
  }

  // Mulai scroll dengan arah yang baru
  const scrollStep = 1;
  const scrollSpeed = 10;
  scrollInterval = setInterval(() => {
    if (currentDirection === "up") {
      window.scrollBy(0, -scrollStep);
    } else if (currentDirection === "down") {
      window.scrollBy(0, scrollStep);
    }
  }, scrollSpeed);
}

function stopAutoScroll() {
  clearInterval(scrollInterval);
}

// Menambahkan event listener untuk tombol start
startButton.addEventListener('mousedown', () => {
    // Mengubah status tombol
    startButton.disabled = true;
    stopButton.disabled = false;

    // Menginisialisasi objek Web Audio API setelah pengguna memberikan tindakan pada halaman
    window.AudioContext = window.AudioContext || window.webkitAudioContext;
    var audioContext = new AudioContext();

    // Menginisialisasi objek MediaStream
    navigator.mediaDevices.getUserMedia({audio: true})
        .then(function(stream) {
            // Membuat source audio dari stream yang didapat
            var source = audioContext.createMediaStreamSource(stream);

            // Membuat objek analisis gelombang
            analyser = audioContext.createAnalyser();
            analyser.fftSize = 2048;
            bufferLength = analyser.frequencyBinCount;
            dataArray = new Uint8Array(bufferLength);

            // Menghubungkan source audio dengan analisis gelombang
            source.connect(analyser);

            // Memulai visualisasi
            draw();
        })
        .catch(function(err) {
            console.log('The following getUserMedia error occurred: ' + err);
        });
});

// Menambahkan event listener untuk tombol stop
stopButton.addEventListener('mousedown', function() {
    // Mengubah status tombol
    startButton.disabled = false;
    stopButton.disabled = true;

    // Menghentikan visualisasi
    cancelAnimationFrame(animationId);

    // Membuat objek AudioBuffer
    var audioBuffer = audioContext.createBuffer(1, bufferLength, audioContext.sampleRate);
    var audioData = audioBuffer.getChannelData(0);

    // Menambahkan data gelombang ke dalam buffer
    for (var i = 0; i < bufferLength; i++) {
        audioData[i] = (dataArray[i] - 128) / 128;
    }

    // Membuat objek AudioBufferSourceNode
    var audioSource = audioContext.createBufferSource();
    audioSource.buffer = audioBuffer;

    // Menghubungkan AudioBufferSourceNode ke output audio
    audioSource.connect(audioContext.destination);

    // Memainkan audio
    audioSource.start();

    // Membuat URL blob untuk audio
    var blob = new Blob([audioBuffer], {type: 'audio/wav'});
    var url = URL.createObjectURL(blob);

    // Memutarkan audio di elemen HTML audio
    var audioElement = document.getElementById('audioElement');
    audioElement.src = url;
    audioElement.play();
});

  // Variabel untuk menyimpan ID animasi
  var animationId;

 
  // Fungsi untuk menggambar grafik gelombang
  function draw() {

   
    // Membersihkan canvas sebelum menggambar
    canvasCtx.clearRect(0, 0, canvas.width, canvas.height);

    // Menggambar grafik gelombang
    analyser.getByteTimeDomainData(dataArray);

    // Membersihkan konten pada canvas
    canvasCtx.fillStyle = 'transparent';
    canvasCtx.fillRect(0, 0, canvas.width, canvas.height);

    // Mengatur properti canvas untuk menggambar grafik
    canvasCtx.lineWidth = 3;
    // Membuat gradient warna pada gelombang bulat
var gradient = canvasCtx.createLinearGradient(0, 0, canvas.width, 0);
gradient.addColorStop(0, '#4eb4e5'); // warna awal
gradient.addColorStop(0.5, '#ffeb3b'); // warna tengah
gradient.addColorStop(1, '#4eb4e5'); // warna akhir
canvasCtx.strokeStyle = gradient;

    canvasCtx.beginPath();

    var sliceWidth = canvas.width * 1.0 / bufferLength;
    var centerX = canvas.width / 2;
    var centerY = canvas.height / 2;
    var radius = 50;

    // Menggambar grafik gelombang
    for (var i = 0; i < bufferLength; i++) {
        var v = dataArray[i] / 128.0;
        var angle = i * (Math.PI * 2) / bufferLength;
        var x = centerX + Math.cos(angle) * (radius * v);
        var y = centerY + Math.sin(angle) * (radius * v);

        if (i === 0) {
            canvasCtx.moveTo(x, y);
        } else {
            canvasCtx.lineTo(x, y);
        }
    }

    canvasCtx.closePath();
    canvasCtx.stroke();

    // Meminta browser untuk menggambar lagi di frame berikutnya
    animationId = requestAnimationFrame(draw);
     // Memulai pengenalan suara
     recognition.onresult = function (event) {
  const interimTranscripts = [];
  for (let i = event.resultIndex, len = event.results.length; i < len; i++) {
    const transcript = event.results[i][0].transcript;
    if (event.results[i].isFinal) {
      let output = transcript;
   




            for (let word in punctuation) {
              const pattern = new RegExp("\\b" + word + "\\b", "gi");
              output = output.replace(pattern, punctuation[word]);
            }


            if (/\bsalin teks\b/.test(output.toLowerCase())) {
              navigator.clipboard.writeText(outputText.value);
              outputText.focus();

              if ('vibrate' in navigator) {
                navigator.vibrate(200);
              }
              if (output.toLowerCase().includes("salin teks")) {
                const copyBtn = document.getElementById('salin-btn');
                copyBtn.click();
              }


            } else if (output.toLowerCase().includes("hapus")) {
              if (output.toLowerCase().includes("semua")) { // hapus semua kalimat
                outputText.value = "";
                const audio = new Audio('assets/notif1.mp3'); // ganti 'suara-sukses.mp3' dengan path file suara Anda
                audio.play(); // memainkan suara ketika perintah dijalankan
              } else if (output.toLowerCase().includes("satu kalimat")) { // hapus satu kalimat terakhir
                outputText.value = hapusKalimatTerakhir(outputText.value, 1);
                const audio = new Audio('assets/notif1.mp3'); // ganti 'suara-sukses.mp3' dengan path file suara Anda
                audio.play();
              } else if (output.toLowerCase().includes("dua kalimat")) { // hapus dua kalimat terakhir
                outputText.value = hapusKalimatTerakhir(outputText.value, 2);
                const audio = new Audio('assets/notif1.mp3'); // ganti 'suara-sukses.mp3' dengan path file suara Anda
                audio.play();
              } else if (output.toLowerCase().includes("tiga kalimat")) { // hapus tiga kalimat terakhir
                outputText.value = hapusKalimatTerakhir(outputText.value, 3);
                const audio = new Audio('assets/notif1.mp3'); // ganti 'suara-sukses.mp3' dengan path file suara Anda
                audio.play();
              } else if (output.toLowerCase().includes("4 kalimat")) { // hapus empat kalimat terakhir
                outputText.value = hapusKalimatTerakhir(outputText.value, 4);
                const audio = new Audio('assets/notif1.mp3'); // ganti 'suara-sukses.mp3' dengan path file suara Anda
                audio.play();
              } else {
                outputText.value = hapusKalimatSebelumnya(outputText.value) || hapusKalimatTerakhirTidakKosong(
                  outputText.value);
              }
            } else if (output.toLowerCase().includes("share ke whatsapp")) {
              shareToWhatsApp();
            } else if (output.toLowerCase().includes("cari di google")) {
              searchOnGoogle();
            } else if (output.toLowerCase().includes("cari di youtube")) {
              searchOnYouTube();
            } else if (output.toLowerCase().includes("share ke facebook")) {
              shareContent('https://facebook.com/sharer/sharer.php?u=');
              // ganti URL di atas dengan URL dari platform sharing yang ingin digunakan
            } else if (output.toLowerCase().includes("pindah ke bawah")) {
              goToFooter();

            } else if (output.toLowerCase().includes("pindah ke produk")) {
              goToProduk();

            } else if (output.toLowerCase().includes("pindah ke atas")) {
              goToTatang();

            } else if (output.toLowerCase().includes("rubah warna")) {
              if (output.toLowerCase().includes("hijau tosca")) {
                document.querySelector('#color1-btn').click();
              } else if (output.toLowerCase().includes("hitam")) {
                document.querySelector('#color2-btn').click();
              } else if (output.toLowerCase().includes("putih")) {
                document.querySelector('#color3-btn').click();
              } else if (output.toLowerCase().includes("merah")) {
                document.querySelector('#color4-btn').click();
              } else if (output.toLowerCase().includes("ungu")) {
                document.querySelector('#color5-btn').click();
              } else if (output.toLowerCase().includes("biru muda")) {
                document.querySelector('#color6-btn').click();
              } else if (output.toLowerCase().includes("biru")) {
                document.querySelector('#color7-btn').click();
              } else if (output.toLowerCase().includes("pink")) {
                document.querySelector('#color8-btn').click();
              }

            } else if (output.toLowerCase().includes("mode layar penuh")) {
              document.querySelector('#full-mode-toggle').click();
              
             
              const audio = new Audio('assets/notif3.mp3'); // ganti 'suara-sukses.mp3' dengan path file suara Anda
                audio.play();
            } else if (output.toLowerCase().includes("mode layar biasa")) {
              document.querySelector('#full-mode-toggle').click();
              const audio = new Audio('assets/notif3.mp3'); // ganti 'suara-sukses.mp3' dengan path file suara Anda
                audio.play();
              
            } 

        
      else if (output.toLowerCase().includes("stop scroll")) {
  stopAutoScroll(); // menghentikan scroll
  const audio = new Audio('assets/notif3.mp3'); // ganti 'suara-sukses.mp3' dengan path file suara Anda
  audio.play();      
} else if (output.toLowerCase().includes("scroll ke bawah")) {
  startAutoScroll("down"); 
  const audio = new Audio('assets/notif5.mp3'); // ganti 'suara-sukses.mp3' dengan path file suara Anda
  audio.play(); 
  // memulai scroll ke bawah
} else if (output.toLowerCase().includes("scroll ke atas")) {
  startAutoScroll("up"); // memulai scroll ke atas
  const audio = new Audio('assets/notif5.mp3'); // ganti 'suara-sukses.mp3' dengan path file suara Anda
  audio.play(); 
}else if (output.toLowerCase().includes("putar musik")) {
  const audio = new Audio('assets/notif9.mp3'); // ganti 'path/to/music.mp3' dengan path file musik Anda
  audio.play();
}else if (transcript.toLowerCase().includes('whatsapp sarah')) {
  window.location.href = 'https://api.whatsapp.com/send?phone=6282311406572&action=phone';
}


             else {
              outputText.value += output;
            }
          } else {
            interimTranscripts.push(transcript);
          }
        }

        interimText.innerHTML = interimTranscripts.map(transcript => `<span>${transcript}</span>`).join('');

      };
}

    </script>


<p>Current battery level: <span id="battery-level">-</span>%</p>
<p>Charging: <span id="charging-status">-</span></p>

<script>
  window.addEventListener('load', function() {
    var battery = navigator.battery || navigator.mozBattery || navigator.webkitBattery;
    if ('navigator' in window && 'getBattery' in navigator) {
      navigator.getBattery().then(function(battery) {
        function updateBatteryStatus() {
          document.querySelector('#battery-level').textContent = Math.round(battery.level * 100);
          document.querySelector('#charging-status').textContent = battery.charging ? 'Yes' : 'No';
        }
        battery.addEventListener('chargingchange', updateBatteryStatus);
        battery.addEventListener('levelchange', updateBatteryStatus);
        updateBatteryStatus();
      });
    } else {
      console.log('Battery status not supported.');
    }
  });
</script>

<h1>Kotak Meter Kubik</h1>

<div id="container">
  <div id="box"></div>
</div>

<label for="panjang">Panjang:</label>
<input type="number" id="panjang" name="panjang" value="0" min="0" max="100" onchange="updateBox()">
<br>

<label for="lebar">Lebar:</label>
<input type="number" id="lebar" name="lebar" value="0" min="0" max="100" onchange="updateBox()">
<br>

<label for="tinggi">Tinggi:</label>
<input type="number" id="tinggi" name="tinggi" value="0" min="0" max="100" onchange="updateBox()">
<br>

<script>
function updateBox() {
  var panjang = document.getElementById("panjang").value;
  var lebar = document.getElementById("lebar").value;
  var tinggi = document.getElementById("tinggi").value;

  // Mengubah dimensi kotak dengan CSS
  var box = document.getElementById("box");
  box.style.width = panjang + "px";
  box.style.height = tinggi + "px";
  box.style.depth = lebar + "px";

  // Menghitung volume kotak dan menampilkan dalam gambaran
  var volume = panjang * tinggi * lebar;
  document.getElementById("volume").innerHTML = volume;
}
</script>

<p>Volume: <span id="volume">0</span></p>

</body>
</html>
